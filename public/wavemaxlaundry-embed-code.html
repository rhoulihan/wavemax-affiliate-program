<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WaveMAX Affiliate Program - Embed Code</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        pre {
            background: #f4f4f4;
            border: 1px solid #ddd;
            padding: 15px;
            overflow-x: auto;
            border-radius: 5px;
        }
        code {
            background: #f4f4f4;
            padding: 2px 5px;
            border-radius: 3px;
        }
        .example {
            border: 2px solid #0066cc;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>WaveMAX Affiliate Program - Embed Code</h1>
    
    <p>This page provides the embed code needed for the wavemaxlaundry.com site to display the affiliate program landing page by default, or the customer login page when an affiliate ID is provided.</p>
    
    <h2>Embed Code for wavemaxlaundry.com</h2>
    
    <p>Add this code to your page at <code>https://www.wavemaxlaundry.com/austin-tx/wavemax-austin-affiliate-program</code>:</p>
    
    <pre><code>&lt;!-- WaveMAX Affiliate Program Embed --&gt;
&lt;div id="wavemax-affiliate-embed"&gt;
    &lt;iframe 
        id="wavemax-iframe"
        src="https://wavemax.promo/embed-app.html"
        width="100%"
        height="600"
        frameborder="0"
        style="border: none; min-height: 600px;"&gt;
    &lt;/iframe&gt;
&lt;/div&gt;

&lt;script&gt;
(function() {
    // Get parameters from URL
    const urlParams = new URLSearchParams(window.location.search);
    const affiliateId = urlParams.get('affid');
    const pickup = urlParams.get('pickup');
    
    // Build iframe URL
    let iframeSrc = 'https://wavemax.promo/embed-app.html';
    
    // Only add route parameter if there's an affiliate ID
    if (affiliateId) {
        iframeSrc += '?route=/customer-login';
        iframeSrc += `&affid=${affiliateId}`;
        
        if (pickup === 'true') {
            iframeSrc += '&pickup=true';
        }
    } else {
        // No affiliate ID - show landing page
        iframeSrc += '?route=/landing';
    }
    
    // Update iframe src
    const iframe = document.getElementById('wavemax-iframe');
    iframe.src = iframeSrc;
    
    // Handle iframe resizing
    window.addEventListener('message', function(event) {
        if (event.origin !== 'https://wavemax.promo') return;
        
        if (event.data.type === 'resize' && event.data.data && event.data.data.height) {
            const iframe = document.getElementById('wavemax-iframe');
            iframe.style.height = event.data.data.height + 'px';
        }
    });
})();
&lt;/script&gt;</code></pre>
    
    <h2>How It Works</h2>
    
    <ol>
        <li>When no parameters are present, the embed displays the affiliate program landing page</li>
        <li>When an <code>affid</code> parameter is detected in the URL, it shows the customer login page</li>
        <li>The affiliate ID is passed to the embedded pages for tracking</li>
        <li>Customers can log in or register with the affiliate's ID automatically attached</li>
        <li>The affiliate ID is preserved throughout the entire customer journey</li>
    </ol>
    
    <h2>Example URLs</h2>
    
    <p>When visiting the page without parameters (shows landing page):</p>
    <code>https://www.wavemaxlaundry.com/austin-tx/wavemax-austin-affiliate-program</code>
    
    <p>When affiliates share their link (shows customer login):</p>
    <code>https://www.wavemaxlaundry.com/austin-tx/wavemax-austin-affiliate-program?affid=AFF123456</code>
    
    <p>The embedded iframe will automatically load:</p>
    <code>https://wavemax.promo/embed-app.html?route=/customer-login&affid=AFF123456</code>
    
    <p>For direct schedule pickup (redirects to schedule form after login):</p>
    <code>https://www.wavemaxlaundry.com/austin-tx/wavemax-austin-affiliate-program?affid=AFF123456&pickup=true</code>
    
    <h2>Testing</h2>
    
    <div class="example">
        <h3>Live Example</h3>
        <p>Below is a live example of how the embed will appear:</p>
        
        <div id="test-embed">
            <iframe 
                id="test-iframe"
                src="https://wavemax.promo/embed-app.html"
                width="100%"
                height="600"
                frameborder="0"
                style="border: 1px solid #ddd; min-height: 600px;">
            </iframe>
        </div>
    </div>
    
    <script>
    // Test the embed functionality
    (function() {
        const urlParams = new URLSearchParams(window.location.search);
        const affiliateId = urlParams.get('affid');
        const pickup = urlParams.get('pickup');
        
        const iframe = document.getElementById('test-iframe');
        
        if (affiliateId) {
            let src = `https://wavemax.promo/embed-app.html?route=/customer-login&affid=${affiliateId}`;
            if (pickup === 'true') {
                src += '&pickup=true';
            }
            iframe.src = src;
        } else {
            // Show landing page by default
            iframe.src = 'https://wavemax.promo/embed-app.html?route=/landing';
        }
        
        window.addEventListener('message', function(event) {
            if (event.origin !== 'https://wavemax.promo') return;
            
            if (event.data.type === 'resize' && event.data.data && event.data.data.height) {
                const iframe = document.getElementById('test-iframe');
                iframe.style.height = event.data.data.height + 'px';
            }
        });
    })();
    </script>
</body>
</html>