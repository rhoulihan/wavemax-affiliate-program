<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WaveMAX Affiliate Program - Embed Code for WaveMAXLaundry.com</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        .code-block {
            background: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            margin: 20px 0;
            overflow-x: auto;
        }
        pre {
            margin: 0;
            white-space: pre-wrap;
        }
        h1 {
            color: #333;
        }
        h2 {
            color: #555;
            margin-top: 30px;
        }
        .note {
            background: #e8f4f8;
            border-left: 4px solid #1e3a8a;
            padding: 10px 15px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>WaveMAX Affiliate Program - Embed Code</h1>
    
    <div class="note">
        <strong>Important:</strong> This embed code should replace the current iframe implementation on the WaveMAXLaundry.com website to properly handle URL parameters.
    </div>

    <h2>Complete Embed Code</h2>
    <p>Add this code where you want the WaveMAX Affiliate Program to appear:</p>
    
    <div class="code-block">
        <pre><code>&lt;!-- WaveMAX Affiliate Program Embed Container --&gt;
&lt;div id="wavemax-embed-container" style="width: 100%; min-height: 600px;"&gt;
    &lt;iframe 
        id="wavemax-affiliate-iframe"
        src=""
        width="100%" 
        height="600" 
        frameborder="0" 
        scrolling="no"
        style="width: 100%; min-height: 600px; border: none;"&gt;
    &lt;/iframe&gt;
&lt;/div&gt;

&lt;script&gt;
(function() {
    // Function to build iframe URL with proper parameters
    function buildIframeUrl() {
        const baseUrl = 'https://wavemax.promo/embed-app.html';
        const currentUrl = new URL(window.location.href);
        const params = new URLSearchParams(currentUrl.search);
        
        // Create new params for iframe
        const iframeParams = new URLSearchParams();
        
        // Check for specific parameters and route accordingly
        const login = params.get('login');
        const affid = params.get('affid') || params.get('affiliate');
        const pickup = params.get('pickup');
        const route = params.get('route');
        
        // Handle login parameter
        if (login) {
            iframeParams.set('login', login);
        }
        
        // Handle affiliate ID
        if (affid) {
            iframeParams.set('affid', affid);
        }
        
        // Handle pickup flag
        if (pickup === 'true') {
            iframeParams.set('pickup', 'true');
        }
        
        // Handle specific route
        if (route) {
            iframeParams.set('route', route);
        }
        
        // If no specific parameters, check if we should show landing
        if (!login && !affid && !route) {
            iframeParams.set('route', '/landing');
        }
        
        // Build final URL
        const finalUrl = iframeParams.toString() ? 
            `${baseUrl}?${iframeParams.toString()}` : 
            baseUrl;
            
        console.log('WaveMAX Iframe URL:', finalUrl);
        return finalUrl;
    }
    
    // Set iframe source
    const iframe = document.getElementById('wavemax-affiliate-iframe');
    if (iframe) {
        iframe.src = buildIframeUrl();
    }
    
    // Handle messages from iframe
    window.addEventListener('message', function(event) {
        // Only accept messages from trusted domain
        if (event.origin !== 'https://wavemax.promo') return;
        
        const iframe = document.getElementById('wavemax-affiliate-iframe');
        
        if (event.data && event.data.type) {
            switch(event.data.type) {
                case 'resize':
                    // Handle iframe resize
                    if (event.data.data && event.data.data.height) {
                        const newHeight = event.data.data.height + 'px';
                        iframe.style.height = newHeight;
                        console.log('Iframe resized to:', newHeight);
                    }
                    break;
                    
                case 'scroll-to-top':
                    // Scroll to top of iframe
                    iframe.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    break;
                    
                case 'route-changed':
                    // Log route changes (optional)
                    console.log('WaveMAX route changed:', event.data.data);
                    break;
                    
                case 'navigate':
                    // Handle navigation requests (optional)
                    console.log('WaveMAX navigation request:', event.data.data);
                    break;
            }
        }
    });
    
    // Update iframe if URL changes (for single-page applications)
    window.addEventListener('popstate', function() {
        const iframe = document.getElementById('wavemax-affiliate-iframe');
        if (iframe) {
            iframe.src = buildIframeUrl();
        }
    });
})();
&lt;/script&gt;</code></pre>
    </div>

    <h2>URL Parameter Examples</h2>
    <p>The embed code will properly handle these URL patterns:</p>
    
    <ul>
        <li><code>?affid=AFF123456</code> - Shows customer registration for specific affiliate</li>
        <li><code>?login=customer</code> - Shows customer login</li>
        <li><code>?login=customer&pickup=true</code> - Shows customer login, then redirects to schedule pickup</li>
        <li><code>?login=affiliate</code> - Shows affiliate login</li>
        <li><code>?login=admin</code> - Shows administrator login</li>
        <li><code>?login=operator</code> - Shows operator login</li>
        <li><code>?route=/customer-dashboard</code> - Shows specific route</li>
    </ul>

    <h2>Testing the Integration</h2>
    <p>After implementing the embed code, test these URLs:</p>
    
    <ol>
        <li><strong>Affiliate Registration Link:</strong><br>
            <code>https://www.wavemaxlaundry.com/austin-tx/wavemax-austin-affiliate-program?affid=AFF227530</code></li>
        <li><strong>Customer Login:</strong><br>
            <code>https://www.wavemaxlaundry.com/austin-tx/wavemax-austin-affiliate-program?login=customer</code></li>
        <li><strong>Schedule Pickup:</strong><br>
            <code>https://www.wavemaxlaundry.com/austin-tx/wavemax-austin-affiliate-program?login=customer&pickup=true</code></li>
    </ol>

    <h2>Important Notes</h2>
    <div class="note">
        <ul>
            <li>The iframe source is set dynamically based on URL parameters</li>
            <li>All parameters from the parent URL are properly passed to the iframe</li>
            <li>The iframe height adjusts automatically based on content</li>
            <li>Cross-origin communication is handled securely</li>
            <li>Make sure to keep the <code>https://wavemax.promo</code> origin check for security</li>
        </ul>
    </div>

    <h2>Minimal Version (Without Comments)</h2>
    <p>If you prefer a more compact version:</p>
    
    <div class="code-block">
        <pre><code>&lt;div id="wavemax-embed-container" style="width: 100%; min-height: 600px;"&gt;
    &lt;iframe id="wavemax-affiliate-iframe" src="" width="100%" height="600" frameborder="0" scrolling="no" style="width: 100%; min-height: 600px; border: none;"&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;script&gt;
(function(){
    function buildIframeUrl(){
        const baseUrl='https://wavemax.promo/embed-app.html';
        const params=new URLSearchParams(window.location.search);
        const iframeParams=new URLSearchParams();
        
        ['login','affid','affiliate','pickup','route'].forEach(key=>{
            const value=params.get(key);
            if(value){
                iframeParams.set(key==='affiliate'?'affid':key,value);
            }
        });
        
        if(!iframeParams.toString()){
            iframeParams.set('route','/landing');
        }
        
        return baseUrl+'?'+iframeParams.toString();
    }
    
    const iframe=document.getElementById('wavemax-affiliate-iframe');
    if(iframe)iframe.src=buildIframeUrl();
    
    window.addEventListener('message',function(e){
        if(e.origin!=='https://wavemax.promo')return;
        const iframe=document.getElementById('wavemax-affiliate-iframe');
        if(e.data&&e.data.type==='resize'&&e.data.data&&e.data.data.height){
            iframe.style.height=e.data.data.height+'px';
        }else if(e.data&&e.data.type==='scroll-to-top'){
            iframe.scrollIntoView({behavior:'smooth',block:'start'});
        }
    });
})();
&lt;/script&gt;</code></pre>
    </div>
</body>
</html>