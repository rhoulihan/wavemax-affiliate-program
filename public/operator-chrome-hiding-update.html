<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WaveMAX Operator Chrome Hiding Update</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        .code-block {
            background: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            margin: 20px 0;
            overflow-x: auto;
        }
        pre {
            margin: 0;
            white-space: pre-wrap;
        }
        h1 {
            color: #333;
        }
        h2 {
            color: #555;
            margin-top: 30px;
        }
        .note {
            background: #e8f4f8;
            border-left: 4px solid #1e3a8a;
            padding: 10px 15px;
            margin: 20px 0;
        }
        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px 15px;
            margin: 20px 0;
        }
        .highlight {
            background-color: #ffeb3b;
            padding: 2px 4px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>WaveMAX Operator Chrome Hiding Update</h1>
    
    <div class="note">
        <strong>Issue:</strong> The current parent page code only hides chrome (header/footer) on mobile devices. We need it to also hide chrome when operators are logged in and using the scanning interface.
    </div>

    <h2>Solution: Update the Message Handler</h2>
    <p>Since we cannot modify the live parent page directly, here are two approaches:</p>

    <h3>Option 1: Quick Fix (Modify existing script)</h3>
    <p>In the parent page's script, find this section and modify it:</p>
    
    <div class="code-block">
        <pre><code>// CURRENT CODE (only hides on mobile):
case 'hide-chrome':
    if (isMobile || isTablet) {
        hideChrome();
    }
    break;

// CHANGE TO (always hide when requested):
case 'hide-chrome':
    <span class="highlight">// Always hide chrome when requested by iframe
    hideChrome();</span>
    break;</code></pre>
    </div>

    <h3>Option 2: Add Route Detection</h3>
    <p>For better control, update the route-changed handler to detect operator routes:</p>
    
    <div class="code-block">
        <pre><code>case 'route-changed':
    <span class="highlight">const route = event.data.data && event.data.data.route ? event.data.data.route : '/';
    
    // Hide chrome for operator routes OR mobile
    if (route.startsWith('/operator-') || isMobile) {
        hideChrome();
    }
    // Show chrome if not on operator route AND not mobile
    else if (!route.startsWith('/operator-') && !isMobile && chromeHidden) {
        showChrome();
    }</span>
    break;</code></pre>
    </div>

    <h2>Complete Updated Bridge Script</h2>
    <p>We've created a complete updated version of the parent-iframe bridge that includes operator route support:</p>
    
    <div class="code-block">
        <pre><code>&lt;script src="https://wavemax.promo/parent-iframe-bridge-operator-update.js"&gt;&lt;/script&gt;</code></pre>
    </div>

    <div class="warning">
        <strong>Important:</strong> This script should replace the existing message handling portion of your current implementation. The key changes are:
        <ul>
            <li>The 'hide-chrome' message now always hides chrome, not just on mobile</li>
            <li>The 'route-changed' message checks for operator routes (routes starting with '/operator-')</li>
            <li>Chrome is automatically hidden when navigating to operator pages</li>
            <li>Chrome is restored when leaving operator pages (on desktop)</li>
        </ul>
    </div>

    <h2>Testing</h2>
    <ol>
        <li>Navigate to the operator login page</li>
        <li>Log in as an operator</li>
        <li>Verify that the parent page header and footer are hidden</li>
        <li>Log out or navigate away from operator pages</li>
        <li>Verify that the header and footer reappear (on desktop)</li>
    </ol>

    <h2>Alternative: CSS-Based Solution</h2>
    <p>If modifying JavaScript is not feasible, you could add this CSS to hide chrome when the iframe contains operator pages:</p>
    
    <div class="code-block">
        <pre><code>/* Hide chrome when iframe is showing operator pages */
body:has(iframe[src*="operator-"]) .topbar,
body:has(iframe[src*="operator-"]) .navbar,
body:has(iframe[src*="operator-"]) .footer {
    display: none !important;
}</code></pre>
    </div>

    <div class="note">
        <strong>Note:</strong> The CSS :has() selector has limited browser support, so the JavaScript solution is more reliable.
    </div>

</body>
</html>