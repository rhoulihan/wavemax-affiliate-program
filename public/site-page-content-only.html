<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">WaveMAX Laundry Austin</title>
    <meta name="description" content="Professional laundry services in Austin, TX" id="page-description">

    <!-- Site Page Content Styles (minimal, parent page styles loaded by route) -->
    <link rel="stylesheet" href="/assets/css/site-page-content.css?v=20251121u">
</head>
<body>
    <!-- Main Content Area Only - No header/footer/hero -->
    <main id="page-content">
        <!-- Content will be dynamically loaded here -->
        <div class="loading-content">
            <p>Loading content...</p>
        </div>
    </main>

    <!-- Page Content Loader Script -->
    <script src="/assets/js/site-page-loader.js"></script>

    <!-- Parent Communication Script -->
    <script>
        (function() {
            'use strict';

            // Send height updates to parent
            function notifyParentOfHeight() {
                const height = document.documentElement.scrollHeight;
                if (window.parent !== window) {
                    window.parent.postMessage({
                        type: 'resize',
                        data: { height: height }
                    }, '*');
                }
            }

            // Initial height notification
            window.addEventListener('load', function() {
                setTimeout(notifyParentOfHeight, 100);
                setTimeout(notifyParentOfHeight, 500);
                setTimeout(notifyParentOfHeight, 1000);
            });

            // Notify on window resize
            let resizeTimeout;
            window.addEventListener('resize', function() {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(notifyParentOfHeight, 100);
            });

            // Observe DOM changes to update height
            const observer = new MutationObserver(function() {
                notifyParentOfHeight();
            });

            observer.observe(document.body, {
                attributes: true,
                childList: true,
                subtree: true
            });

            // Listen for messages from parent
            window.addEventListener('message', function(event) {
                // Handle any messages from parent (e.g., scroll position, viewport info)
                if (event.data && event.data.type) {
                    switch(event.data.type) {
                        case 'viewport-info':
                            // Could adjust layout based on parent viewport
                            console.log('[Site Page] Received viewport info:', event.data.data);
                            break;
                        case 'language-change':
                            // Could handle language switching
                            console.log('[Site Page] Language changed:', event.data.data);
                            break;
                    }
                }
            });

            // Prevent links from navigating within iframe (navigate parent instead)
            document.addEventListener('click', function(e) {
                const link = e.target.closest('a');
                if (link && link.href && !link.target) {
                    const href = link.getAttribute('href');
                    // Allow hash links and external links
                    if (href && href.startsWith('http') && !href.includes('embed-app')) {
                        e.preventDefault();
                        window.parent.postMessage({
                            type: 'navigate',
                            data: { url: href }
                        }, '*');
                    }
                }
            });
        })();
    </script>
</body>
</html>
